<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ç…§ç‰‡ä¸Šå‚³å·¥å…· â€” K-PULSE</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Microsoft JhengHei", sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 2rem;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: white;
      border-radius: 20px;
      padding: 2rem;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    }

    h1 {
      color: #333;
      margin-bottom: 0.5rem;
      font-size: 2rem;
    }

    .subtitle {
      color: #666;
      margin-bottom: 2rem;
      font-size: 1rem;
    }

    .group-selector {
      margin-bottom: 2rem;
      padding: 1.5rem;
      background: #f8f9fa;
      border-radius: 12px;
    }

    .group-selector label {
      display: block;
      font-weight: 600;
      margin-bottom: 0.5rem;
      color: #333;
    }

    select {
      width: 100%;
      padding: 0.75rem;
      border: 2px solid #ddd;
      border-radius: 8px;
      font-size: 1rem;
      cursor: pointer;
      transition: border-color 0.3s;
    }

    select:hover {
      border-color: #667eea;
    }

    select:focus {
      outline: none;
      border-color: #667eea;
    }

    .members-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 1.5rem;
      margin-bottom: 2rem;
    }

    .member-card {
      background: #fff;
      border: 2px solid #e0e0e0;
      border-radius: 12px;
      padding: 1.5rem;
      transition: all 0.3s;
    }

    .member-card:hover {
      border-color: #667eea;
      box-shadow: 0 8px 20px rgba(102, 126, 234, 0.2);
      transform: translateY(-4px);
    }

    .member-card h3 {
      color: #333;
      margin-bottom: 1rem;
      font-size: 1.25rem;
    }

    .preview-image {
      width: 100%;
      height: 200px;
      object-fit: cover;
      border-radius: 8px;
      margin-bottom: 1rem;
      background: #f0f0f0;
    }

    .upload-btn {
      width: 100%;
      padding: 0.75rem;
      background: #667eea;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1rem;
      font-weight: 600;
      transition: background 0.3s;
    }

    .upload-btn:hover {
      background: #5568d3;
    }

    .file-input {
      display: none;
    }

    .status {
      margin-top: 0.5rem;
      font-size: 0.875rem;
      color: #666;
    }

    .status.success {
      color: #22c55e;
    }

    .actions {
      display: flex;
      gap: 1rem;
      margin-top: 2rem;
      padding-top: 2rem;
      border-top: 2px solid #e0e0e0;
    }

    .btn {
      flex: 1;
      padding: 1rem;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
    }

    .btn-primary {
      background: #22c55e;
      color: white;
    }

    .btn-primary:hover {
      background: #16a34a;
    }

    .btn-secondary {
      background: #64748b;
      color: white;
    }

    .btn-secondary:hover {
      background: #475569;
    }

    .instructions {
      background: #fffbeb;
      border-left: 4px solid #f59e0b;
      padding: 1rem;
      border-radius: 8px;
      margin-bottom: 2rem;
    }

    .instructions h3 {
      color: #b45309;
      margin-bottom: 0.5rem;
    }

    .instructions ul {
      margin-left: 1.5rem;
      color: #78350f;
    }

    .instructions li {
      margin-bottom: 0.25rem;
    }

    @media (max-width: 768px) {
      .container {
        padding: 1rem;
      }

      .members-grid {
        grid-template-columns: 1fr;
      }

      .actions {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ“¸ ç…§ç‰‡ä¸Šå‚³å·¥å…·</h1>
    <p class="subtitle">ç‚ºåœ˜é«”æˆå“¡ä¸Šå‚³ç…§ç‰‡</p>

    <div class="instructions">
      <h3>ä½¿ç”¨èªªæ˜ï¼š</h3>
      <ul>
        <li>é¸æ“‡è¦ä¸Šå‚³ç…§ç‰‡çš„åœ˜é«”</li>
        <li>é»æ“Šã€Œé¸æ“‡ç…§ç‰‡ã€æŒ‰éˆ•ä¸Šå‚³æˆå“¡ç…§ç‰‡</li>
        <li>å»ºè­°ç…§ç‰‡å°ºå¯¸ï¼š800x800px ä»¥ä¸Šï¼Œæ ¼å¼ï¼šJPG æˆ– PNG</li>
        <li>ä¸Šå‚³å¾Œå¯ä»¥å³æ™‚é è¦½æ•ˆæœ</li>
        <li>é»æ“Šã€Œä¸‹è¼‰æ‰€æœ‰ç…§ç‰‡ã€ä¿å­˜åˆ°æœ¬åœ°</li>
      </ul>
    </div>

    <div class="group-selector">
      <label for="group-select">é¸æ“‡åœ˜é«”ï¼š</label>
      <select id="group-select">
        <option value="">-- è«‹é¸æ“‡åœ˜é«” --</option>
        <option value="straykids">Stray Kids</option>
        <option value="itzy">ITZY</option>
        <option value="nmixx">NMIXX</option>
        <option value="2pm">2PM</option>
        <option value="day6">DAY6</option>
        <option value="xdinary-heroes">Xdinary Heroes</option>
        <option value="niziu">NiziU</option>
        <option value="nexz">NEXZ</option>
        <option value="vcha">VCHA</option>
        <option value="kickflip">KickFlip</option>
      </select>
    </div>

    <div class="members-grid" id="members-grid"></div>

    <div class="actions">
      <button class="btn btn-primary" id="download-all">ğŸ“¥ ä¸‹è¼‰æ‰€æœ‰ç…§ç‰‡</button>
      <button class="btn btn-secondary" id="clear-all">ğŸ—‘ï¸ æ¸…é™¤æ‰€æœ‰ç…§ç‰‡</button>
    </div>
  </div>

  <script>
    const groupMembers = {
      'straykids': [
        { name: 'Bang Chan', filename: 'bangchan' },
        { name: 'Lee Know', filename: 'leeknow' },
        { name: 'Changbin', filename: 'changbin' },
        { name: 'Hyunjin', filename: 'hyunjin' },
        { name: 'Han', filename: 'han' },
        { name: 'Felix', filename: 'felix' },
        { name: 'Seungmin', filename: 'seungmin' },
        { name: 'I.N', filename: 'in' }
      ],
      'itzy': [
        { name: 'Yeji', filename: 'yeji' },
        { name: 'Lia', filename: 'lia' },
        { name: 'Ryujin', filename: 'ryujin' },
        { name: 'Chaeryeong', filename: 'chaeryeong' },
        { name: 'Yuna', filename: 'yuna' }
      ],
      'nmixx': [
        { name: 'Lily', filename: 'lily' },
        { name: 'Haewon', filename: 'haewon' },
        { name: 'Sullyoon', filename: 'sullyoon' },
        { name: 'Bae', filename: 'bae' },
        { name: 'Jiwoo', filename: 'jiwoo' },
        { name: 'Kyujin', filename: 'kyujin' }
      ],
      '2pm': [
        { name: 'Jun.K', filename: 'junk' },
        { name: 'Nichkhun', filename: 'nichkhun' },
        { name: 'Taecyeon', filename: 'taecyeon' },
        { name: 'Wooyoung', filename: 'wooyoung' },
        { name: 'Junho', filename: 'junho' },
        { name: 'Chansung', filename: 'chansung' }
      ],
      'day6': [
        { name: 'Sungjin', filename: 'sungjin' },
        { name: 'Young K', filename: 'youngk' },
        { name: 'Wonpil', filename: 'wonpil' },
        { name: 'Dowoon', filename: 'dowoon' }
      ],
      'xdinary-heroes': [
        { name: 'Gunil', filename: 'gunil' },
        { name: 'Jungsu', filename: 'jungsu' },
        { name: 'Gaon', filename: 'gaon' },
        { name: 'O.de', filename: 'ode' },
        { name: 'Jun Han', filename: 'junhan' },
        { name: 'Jooyeon', filename: 'jooyeon' }
      ],
      'niziu': [
        { name: 'Mako', filename: 'mako' },
        { name: 'Rio', filename: 'rio' },
        { name: 'Maya', filename: 'maya' },
        { name: 'Riku', filename: 'riku' },
        { name: 'Ayaka', filename: 'ayaka' },
        { name: 'Mayuka', filename: 'mayuka' },
        { name: 'Rima', filename: 'rima' },
        { name: 'Miihi', filename: 'miihi' },
        { name: 'Nina', filename: 'nina' }
      ],
      'nexz': [
        { name: 'Tomoya', filename: 'tomoya' },
        { name: 'Yu', filename: 'yu' },
        { name: 'Haru', filename: 'haru' },
        { name: 'So Geon', filename: 'sogeon' },
        { name: 'Seita', filename: 'seita' },
        { name: 'Hyui', filename: 'hyui' },
        { name: 'Yuki', filename: 'yuki' }
      ],
      'vcha': [
        { name: 'Camila', filename: 'camila' },
        { name: 'Lexi', filename: 'lexi' },
        { name: 'Savanna', filename: 'savanna' },
        { name: 'KG', filename: 'kg' },
        { name: 'Kendall', filename: 'kendall' },
        { name: 'Kaylee', filename: 'kaylee' }
      ],
      'kickflip': [
        { name: 'Amaru', filename: 'amaru' },
        { name: 'Donghyeon', filename: 'donghyeon' },
        { name: 'Hyunwoo', filename: 'hyunwoo' },
        { name: 'Keiju', filename: 'keiju' },
        { name: 'Seokhwa', filename: 'seokhwa' },
        { name: 'Yechan', filename: 'yechan' }
      ]
    };

    const uploadedPhotos = {};

    document.getElementById('group-select').addEventListener('change', function(e) {
      const group = e.target.value;
      const grid = document.getElementById('members-grid');
      
      if (!group) {
        grid.innerHTML = '';
        return;
      }

      const members = groupMembers[group];
      grid.innerHTML = members.map(member => `
        <div class="member-card" data-member="${member.filename}">
          <h3>${member.name}</h3>
          <img 
            class="preview-image" 
            id="preview-${member.filename}" 
            src="https://via.placeholder.com/400x400/667eea/ffffff?text=${encodeURIComponent(member.name)}"
            alt="${member.name}"
          >
          <button class="upload-btn" onclick="document.getElementById('file-${member.filename}').click()">
            ğŸ“· é¸æ“‡ç…§ç‰‡
          </button>
          <input 
            type="file" 
            class="file-input" 
            id="file-${member.filename}" 
            accept="image/*"
            onchange="handleFileUpload(event, '${member.filename}', '${member.name}')"
          >
          <div class="status" id="status-${member.filename}">æœªä¸Šå‚³</div>
        </div>
      `).join('');
    });

    function handleFileUpload(event, filename, memberName) {
      const file = event.target.files[0];
      if (!file) return;

      const reader = new FileReader();
      reader.onload = function(e) {
        const img = document.getElementById(`preview-${filename}`);
        img.src = e.target.result;
        
        uploadedPhotos[filename] = {
          data: e.target.result,
          file: file,
          name: memberName
        };

        const status = document.getElementById(`status-${filename}`);
        status.textContent = 'âœ… å·²ä¸Šå‚³';
        status.classList.add('success');
      };
      reader.readAsDataURL(file);
    }

    document.getElementById('download-all').addEventListener('click', async function() {
      if (Object.keys(uploadedPhotos).length === 0) {
        alert('è«‹å…ˆä¸Šå‚³è‡³å°‘ä¸€å¼µç…§ç‰‡ï¼');
        return;
      }

      // å¦‚æœæœ‰å¤šå€‹æª”æ¡ˆï¼Œå»ºè­°ä½¿ç”¨ JSZip æ‰“åŒ…ä¸‹è¼‰
      // é€™è£¡ç°¡åŒ–ç‚ºé€å€‹ä¸‹è¼‰
      for (const [filename, data] of Object.entries(uploadedPhotos)) {
        const link = document.createElement('a');
        link.href = data.data;
        link.download = `${filename}-800.jpg`;
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
        await new Promise(resolve => setTimeout(resolve, 500)); // å»¶é²é¿å…ç€è¦½å™¨é˜»æ“‹
      }

      alert(`æˆåŠŸä¸‹è¼‰ ${Object.keys(uploadedPhotos).length} å¼µç…§ç‰‡ï¼\n\nè«‹å°‡ç…§ç‰‡æ”¾å…¥ images/optimized/ è³‡æ–™å¤¾ä¸­ã€‚`);
    });

    document.getElementById('clear-all').addEventListener('click', function() {
      if (confirm('ç¢ºå®šè¦æ¸…é™¤æ‰€æœ‰å·²ä¸Šå‚³çš„ç…§ç‰‡å—ï¼Ÿ')) {
        Object.keys(uploadedPhotos).forEach(key => delete uploadedPhotos[key]);
        
        const group = document.getElementById('group-select').value;
        if (group) {
          const members = groupMembers[group];
          members.forEach(member => {
            const img = document.getElementById(`preview-${member.filename}`);
            if (img) {
              img.src = `https://via.placeholder.com/400x400/667eea/ffffff?text=${encodeURIComponent(member.name)}`;
            }
            const status = document.getElementById(`status-${member.filename}`);
            if (status) {
              status.textContent = 'æœªä¸Šå‚³';
              status.classList.remove('success');
            }
          });
        }
        
        alert('å·²æ¸…é™¤æ‰€æœ‰ç…§ç‰‡ï¼');
      }
    });

    window.handleFileUpload = handleFileUpload;
  </script>
</body>
</html>
